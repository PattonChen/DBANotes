<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="AIQ">
        
        <link rel="shortcut icon" href="../../../../../img/favicon.ico">
        <title>ASM创建失败分析 - MySkill</title>
        <link href="../../../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/docco.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../../../..">MySkill</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Database <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">GaussDB</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../GaussDB/GaussDB考试认证指南/">GaussDB考试认证指南</a>
</li>
            
<li >
    <a href="../../../../GaussDB/HCIP-GaussDB-OLTP_V1.0考试大纲/">HCIP-GaussDB-OLTP_V1.0考试大纲</a>
</li>
            
<li >
    <a href="../../../../GaussDB/HCIP-GaussDB-OLTP_华为数据库高级工程师认证培训/">HCIP-GaussDB-OLTP_华为数据库高级工程师认证培训</a>
</li>
            
<li >
    <a href="../../../../GaussDB/模拟试卷/">模拟试卷</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Mysql</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../Mysql/Mysql/">Mysql</a>
</li>
            
<li >
    <a href="../../../../Mysql/Mysql_OCP/">Mysql_OCP</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">basic</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../Mysql/basic/Select/">Select</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">InndbArchitecture</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../Mysql/basic/InndbArchitecture/Untitled/">Untitled</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">SQL</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../Mysql/basic/SQL/Alter_Database/">Alter_Database</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/Alter_View/">Alter_View</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/CreateDatabase/">CreateDatabase</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/CreateIndex/">CreateIndex</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/CreateTable/">CreateTable</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/CreateView/">CreateView</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/Create_Table_2/">Create_Table_2</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/Cursor/">Cursor</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/Delete/">Delete</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/Funtion/">Funtion</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/Instert&Update/">Instert&Update</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/MySQL指定账号加密方式的方法/">MySQL指定账号加密方式的方法</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/Select/">Select</a>
</li>
            
<li >
    <a href="../../../../Mysql/basic/SQL/Untitled/">Untitled</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Oracle</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Database_Architacture/">Database_Architacture</a>
</li>
            
<li >
    <a href="../../../Oracle/">Oracle</a>
</li>
            
<li >
    <a href="../../../Rman/">Rman</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Rac</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../GridInstall/">GridInstall</a>
</li>
            
<li >
    <a href="../../RACBuild/">RACBuild</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">ASM</a>
    <ul class="dropdown-menu">
            
<li class="active">
    <a href="./">ASM创建失败分析</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Life <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../../../Life/日本使馆各职能部门/">日本使馆各职能部门</a>
</li>
                                    
<li >
    <a href="../../../../../Life/确定一个可操作的目标/">确定一个可操作的目标</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">GeneralEducation</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Wine</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../../Life/GeneralEducation/Wine/酒/">酒</a>
</li>
            
<li >
    <a href="../../../../../Life/GeneralEducation/Wine/酒的误区/">酒的误区</a>
</li>
            
<li >
    <a href="../../../../../Life/GeneralEducation/Wine/酒精中毒/">酒精中毒</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">define</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../../Life/GeneralEducation/Wine/define/乙醛脱氢酶/">乙醛脱氢酶</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">梦呓</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../../Life/梦呓/模板/">模板</a>
</li>
            
<li >
    <a href="../../../../../Life/梦呓/模板_(copy)/">模板_(copy)</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Linux <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">BasicCommand</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../../Linux/BasicCommand/fdisk/">fdisk</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li >
                                <a href="../../../../../about/">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../../RACBuild/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../../../../../Life/日本使馆各职能部门/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#asm">ASM创建失败分析</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h3 id="asm">ASM创建失败分析</h3>
<pre><code class="shell">#oracle初始化ASM磁盘:
[root@rac01 ~]# cat initdisk.sh 
#!/usr/sbin/env bash 
oracleasm deletedisk OCR1 
oracleasm deletedisk OCR2 
oracleasm deletedisk OCR3 
oracleasm deletedisk DATA1 
oracleasm deletedisk DATA2 
oracleasm deletedisk DATA3 
oracleasm deletedisk DATA4 
oracleasm deletedisk DATA5 
oracleasm deletedisk FRA1 
oracleasm deletedisk FRA2 
oracleasm deletedisk FRA3 
oracleasm deletedisk FRA4 
oracleasm deletedisk ACFS1 

oracleasm createdisk OCR1 /dev/sdb1
oracleasm createdisk OCR2 /dev/sdb2
oracleasm createdisk OCR3 /dev/sdb3
oracleasm createdisk DATA1 /dev/sdb5
oracleasm createdisk DATA2 /dev/sdb6
oracleasm createdisk DATA3 /dev/sdb7
oracleasm createdisk DATA4 /dev/sdb8
oracleasm createdisk DATA5 /dev/sdb9
oracleasm createdisk FRA1 /dev/sdb10
oracleasm createdisk FRA2 /dev/sdb11
oracleasm createdisk FRA3 /dev/sdb12
oracleasm createdisk FRA4 /dev/sdb13
oracleasm createdisk ACFS1 /dev/sdb14

ssh rac02.AutoML.com oracleasm scandisks
ssh rac02.AutoML.com oracleasm listdisks
</code></pre>

<p>1、asmlib创建ASM磁盘错误
# /etc/init.d/oracleasm createdisk VOL1 /dev/sdc3
Marking disk "VOL1" as an ASM disk: [FAILED]
2、查看错误日志
# less /var/log/oracleasm
Disk "VOL1" does not exist or is not instantiated
Writing disk header: done
Instantiating disk: oracleasm-instantiate-disk: Unable to open manager: No such file or directory
failed
Clearing disk header: done
怀疑没有configure和enable
# /etc/init.d/oracleasm configure</p>
<p>Configuring the Oracle ASM library driver.
This will configure the on-boot properties of the Oracle ASM library
driver. The following questions will determine whether the driver is
loaded on boot and what permissions it will have. The current values
will be shown in brackets ('[]'). Hitting <ENTER> without typing an
answer will keep that current value. Ctrl-C will abort.
Default user to own the driver interface [oracle]:
Default group to own the driver interface [dba]:
Start Oracle ASM library driver on boot (y/n) [n]:
Scan for Oracle ASM disks on boot (y/n) [y]:
Writing Oracle ASM library driver configuration: done
Dropping Oracle ASMLib disks: [ OK ]
Shutting down the Oracle ASMLib driver: [ OK ]
# /etc/init.d/oracleasm enable
Writing Oracle ASM library driver configuration: done
Initializing the Oracle ASMLib driver: [ OK ]
Scanning the system for Oracle ASMLib disks: [ OK ]
可以正常创建asm磁盘了
# /etc/init.d/oracleasm createdisk VOL1 /dev/sdc3
Marking disk "VOL1" as an ASM disk: [ OK ]
[root@rac2 local]# /etc/init.d/oracleasm enable
Writing Oracle ASM library driver configuration: done
Initializing the Oracle ASMLib driver: [FAILED]
查看/var/log/oracleasm信息
Loading module "oracleasm": failed
Unable to load module "oracleasm"
发现是Oracleasm和操作系统版本不一致导致，重装asm rpm包可解决。</p>
<p>参考至：http://blog.csdn.net/linghao00/article/details/6676945</p>
<p>如有错误，欢迎指正</p>
<p>邮箱:czmcj@163.com</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>CallMe:Byyelang@gmail.com</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../../../../js/base.js" defer></script>
        <script src="../../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
