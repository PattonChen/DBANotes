<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../../../img/favicon.ico">
  <title>ASM创建失败分析 - MySkys</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "ASM\u521b\u5efa\u5931\u8d25\u5206\u6790";
    var mkdocs_page_input_path = "Database/Oracle/Rac/ASM/ASM\u521b\u5efa\u5931\u8d25\u5206\u6790.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../../../.." class="icon icon-home"> MySkys</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../../../../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Database</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">Mysql</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/Alter Database.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/Alter View.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/Create Table 2.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/CreateDatabase.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/CreateIndex.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/CreateTable.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/CreateView.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/Delete.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/Funtion.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/Instert&Update.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/MySQL指定账号加密方式的方法.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/Select/">Select</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/basic/Untitled.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/Mysql/">Mysql</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Mysql/Mysql_OCP/">Mysql OCP</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../../Oracle/">Oracle</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../PostgeSql/PostgeSql.md">PostgeSql</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Life</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../../../Life/GeneralEducation/Wine/define/乙醛脱氢酶/">乙醛脱氢酶</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../../Life/GeneralEducation/Wine/酒/">酒</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../../Life/GeneralEducation/Wine/酒的误区/">酒的误区</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../../Life/GeneralEducation/Wine/酒精中毒/">酒精中毒</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../../../about/">About</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../..">MySkys</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../..">Docs</a> &raquo;</li>
    
      
    
    <li>ASM创建失败分析</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h3 id="asm">ASM创建失败分析</h3>
<pre><code class="shell">#oracle初始化ASM磁盘:
[root@rac01 ~]# cat initdisk.sh 
#!/usr/sbin/env bash 
oracleasm deletedisk OCR1 
oracleasm deletedisk OCR2 
oracleasm deletedisk OCR3 
oracleasm deletedisk DATA1 
oracleasm deletedisk DATA2 
oracleasm deletedisk DATA3 
oracleasm deletedisk DATA4 
oracleasm deletedisk DATA5 
oracleasm deletedisk FRA1 
oracleasm deletedisk FRA2 
oracleasm deletedisk FRA3 
oracleasm deletedisk FRA4 
oracleasm deletedisk ACFS1 

oracleasm createdisk OCR1 /dev/sdb1
oracleasm createdisk OCR2 /dev/sdb2
oracleasm createdisk OCR3 /dev/sdb3
oracleasm createdisk DATA1 /dev/sdb5
oracleasm createdisk DATA2 /dev/sdb6
oracleasm createdisk DATA3 /dev/sdb7
oracleasm createdisk DATA4 /dev/sdb8
oracleasm createdisk DATA5 /dev/sdb9
oracleasm createdisk FRA1 /dev/sdb10
oracleasm createdisk FRA2 /dev/sdb11
oracleasm createdisk FRA3 /dev/sdb12
oracleasm createdisk FRA4 /dev/sdb13
oracleasm createdisk ACFS1 /dev/sdb14

ssh rac02.AutoML.com oracleasm scandisks
ssh rac02.AutoML.com oracleasm listdisks
</code></pre>

<p>1、asmlib创建ASM磁盘错误
# /etc/init.d/oracleasm createdisk VOL1 /dev/sdc3
Marking disk "VOL1" as an ASM disk: [FAILED]
2、查看错误日志
# less /var/log/oracleasm
Disk "VOL1" does not exist or is not instantiated
Writing disk header: done
Instantiating disk: oracleasm-instantiate-disk: Unable to open manager: No such file or directory
failed
Clearing disk header: done
怀疑没有configure和enable
# /etc/init.d/oracleasm configure</p>
<p>Configuring the Oracle ASM library driver.
This will configure the on-boot properties of the Oracle ASM library
driver. The following questions will determine whether the driver is
loaded on boot and what permissions it will have. The current values
will be shown in brackets ('[]'). Hitting <ENTER> without typing an
answer will keep that current value. Ctrl-C will abort.
Default user to own the driver interface [oracle]:
Default group to own the driver interface [dba]:
Start Oracle ASM library driver on boot (y/n) [n]:
Scan for Oracle ASM disks on boot (y/n) [y]:
Writing Oracle ASM library driver configuration: done
Dropping Oracle ASMLib disks: [ OK ]
Shutting down the Oracle ASMLib driver: [ OK ]
# /etc/init.d/oracleasm enable
Writing Oracle ASM library driver configuration: done
Initializing the Oracle ASMLib driver: [ OK ]
Scanning the system for Oracle ASMLib disks: [ OK ]
可以正常创建asm磁盘了
# /etc/init.d/oracleasm createdisk VOL1 /dev/sdc3
Marking disk "VOL1" as an ASM disk: [ OK ]
[root@rac2 local]# /etc/init.d/oracleasm enable
Writing Oracle ASM library driver configuration: done
Initializing the Oracle ASMLib driver: [FAILED]
查看/var/log/oracleasm信息
Loading module "oracleasm": failed
Unable to load module "oracleasm"
发现是Oracleasm和操作系统版本不一致导致，重装asm rpm包可解决。</p>
<p>参考至：http://blog.csdn.net/linghao00/article/details/6676945</p>
<p>如有错误，欢迎指正</p>
<p>邮箱:czmcj@163.com</p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '../../../../..';</script>
    <script src="../../../../../js/theme.js" defer></script>
      <script src="../../../../../search/main.js" defer></script>

</body>
</html>
