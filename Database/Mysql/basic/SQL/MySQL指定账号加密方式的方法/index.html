<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../../../img/favicon.ico">
  <title>MySQL指定账号加密方式的方法 - MySkys</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "MySQL\u6307\u5b9a\u8d26\u53f7\u52a0\u5bc6\u65b9\u5f0f\u7684\u65b9\u6cd5";
    var mkdocs_page_input_path = "Database/Mysql/basic/SQL/MySQL\u6307\u5b9a\u8d26\u53f7\u52a0\u5bc6\u65b9\u5f0f\u7684\u65b9\u6cd5.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../../../.." class="icon icon-home"> MySkys</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../../../../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Database</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">Mysql</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../Alter Database.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Alter View.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Create Table 2.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../CreateDatabase.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../CreateIndex.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../CreateTable.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../CreateView.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Delete.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Funtion.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Instert&Update.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../MySQL指定账号加密方式的方法.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Select/">Select</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Untitled.md">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../Mysql/">Mysql</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../Mysql_OCP/">Mysql OCP</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../../../Oracle/Oracle/">Oracle</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../PostgeSql/PostgeSql.md">PostgeSql</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Life</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../../../Life/GeneralEducation/Wine/define/乙醛脱氢酶/">乙醛脱氢酶</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../../Life/GeneralEducation/Wine/酒/">酒</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../../Life/GeneralEducation/Wine/酒的误区/">酒的误区</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../../Life/GeneralEducation/Wine/酒精中毒/">酒精中毒</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../../../about/">About</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../..">MySkys</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../..">Docs</a> &raquo;</li>
    
      
    
    <li>MySQL指定账号加密方式的方法</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>Author:AIQ</p>
<p>E-mail:byyelang@gmail.com</p>
<p>[toc]</p>
<h2 id="0"><strong>0.加密安全度</strong></h2>
<h3 id="caching_sha2_password-sha256_password-mysql_native_password"><strong>caching_sha2_password &gt; sha256_password &gt; mysql_native_password</strong></h3>
<blockquote>
<p>The caching_sha2_password and sha256_password authentication plugins provide  more secure password encryption than the mysql_native_password plugin,  and caching_sha2_password provides better performance than sha256_password. 
</p>
</blockquote>
<h2 id="1"><strong>1.创建用户</strong></h2>
<pre><code class="mysql">13.7.1.3 CREATE USER Syntax
CREATE USER [IF NOT EXISTS]
    user [auth_option] [, user [auth_option]] ...
    DEFAULT ROLE role [, role ] ...
    [REQUIRE {NONE | tls_option [[AND] tls_option] ...}]
    [WITH resource_option [resource_option] ...]
    [password_option | lock_option] ...
user:
    (see Section 6.2.4, “Specifying Account Names”)
auth_option: {
    IDENTIFIED BY 'auth_string'
  | IDENTIFIED WITH auth_plugin
  | IDENTIFIED WITH auth_plugin BY 'auth_string'
  | IDENTIFIED WITH auth_plugin AS 'hash_string'
}
tls_option: {
   SSL
 | X509
 | CIPHER 'cipher'
 | ISSUER 'issuer'
 | SUBJECT 'subject'
}
resource_option: {
    MAX_QUERIES_PER_HOUR count
  | MAX_UPDATES_PER_HOUR count
  | MAX_CONNECTIONS_PER_HOUR count
  | MAX_USER_CONNECTIONS count
}
password_option: {
    PASSWORD EXPIRE [DEFAULT | NEVER | INTERVAL N DAY]
  | PASSWORD HISTORY {DEFAULT | N}
  | PASSWORD REUSE INTERVAL {DEFAULT | N DAY}
  | PASSWORD REQUIRE CURRENT [DEFAULT | OPTIONAL]Account Management Statements
2241
}
lock_option: {
    ACCOUNT LOCK
  | ACCOUNT UNLOCK
}
The CREATE USER statement creates new MySQL accounts. It enables authentication, role, SSL/TLS,
resource-limit, and password-management properties to be established for new accounts, and controls
whether accounts are initially locked or unlocked.
To use CREATE USER, you must have the global CREATE USER privilege, or the INSERT privilege
for the mysql system database. When the read_only system variable is enabled, CREATE USER
additionally requires the CONNECTION_ADMIN or SUPER privilege.
CREATE USER either succeeds for all named users or rolls back and has no effect if any error occurs.
By default, an error occurs if you try to create a user that already exists. If the IF NOT EXISTS clause
is given, the statement produces a warning for each named user that already exists, rather than an
error.
Important
Under some circumstances, CREATE USER may be recorded in server logs or
on the client side in a history file such as ~/.mysql_history, which means
that cleartext passwords may be read by anyone having read access to that
information. For information about the conditions under which this occurs for the
server logs and how to control it, see Section 6.1.2.3, “Passwords and Logging”.
For similar information about client-side logging, see Section 4.5.1.3, “mysql
Logging”.
</code></pre>

<h3 id="11"><strong>1.1 例子</strong></h3>
<pre><code class="mysql">CREATE USER
  'jeffrey'@'localhost' IDENTIFIED WITH mysql_native_password
                                   BY 'new_password1',
  'jeanne'@'localhost' IDENTIFIED WITH sha256_password
                                  BY 'new_password2'
  REQUIRE X509 WITH MAX_QUERIES_PER_HOUR 60
  PASSWORD HISTORY 5
  ACCOUNT LOCK;
</code></pre>

<h2 id="2"><strong>2.修改用户</strong></h2>
<pre><code class="mysql">13.7.1.1 ALTER USER Syntax
ALTER USER [IF EXISTS]
    user [auth_option] [, user [auth_option]] ...
    [REQUIRE {NONE | tls_option [[AND] tls_option] ...}]
    [WITH resource_option [resource_option] ...]
    [password_option | lock_option] ...Account Management Statements
2230
ALTER USER [IF EXISTS]
    USER() IDENTIFIED BY 'auth_string' [REPLACE 'current_auth_string']
ALTER USER [IF EXISTS]
    user DEFAULT ROLE
    {NONE | ALL | role [, role ] ...}
user:
    (see Section 6.2.4, “Specifying Account Names”)
auth_option: {
    IDENTIFIED BY 'auth_string' [REPLACE 'current_auth_string']
  | IDENTIFIED WITH auth_plugin
  | IDENTIFIED WITH auth_plugin BY 'auth_string' [REPLACE 'current_auth_string']
  | IDENTIFIED WITH auth_plugin AS 'hash_string'
}
tls_option: {
   SSL
 | X509
 | CIPHER 'cipher'
 | ISSUER 'issuer'
 | SUBJECT 'subject'
}
resource_option: {
    MAX_QUERIES_PER_HOUR count
  | MAX_UPDATES_PER_HOUR count
  | MAX_CONNECTIONS_PER_HOUR count
  | MAX_USER_CONNECTIONS count
}
password_option: {
    PASSWORD EXPIRE [DEFAULT | NEVER | INTERVAL N DAY]
  | PASSWORD HISTORY {DEFAULT | N}
  | PASSWORD REUSE INTERVAL {DEFAULT | N DAY}
  | PASSWORD REQUIRE CURRENT [DEFAULT | OPTIONAL]
}
lock_option: {
    ACCOUNT LOCK
  | ACCOUNT UNLOCK
}
The ALTER USER statement modifies MySQL accounts. It enables authentication, role, SSL/TLS,
resource-limit, and password-management properties to be modified for existing accounts, and enables
account locking and unlocking.
In most cases, ALTER USER requires the global CREATE USER privilege, or the UPDATE privilege for
the mysql system database. The exceptions are:
• Any client who connects to the server using a nonanonymous account can change the password for
that account. (In particular, you can change your own password.) To see which account the server
authenticated you as, invoke the CURRENT_USER() function:
SELECT CURRENT_USER();
• For DEFAULT ROLE syntax, ALTER USER requires these privileges:
• Setting the default roles for another user requires the global CREATE USER privilege, or the
UPDATE privilege for the mysql.default_roles system table.
• Setting the default roles for yourself requires no special privileges, as long as the roles you want
as the default have been granted to you.
When the read_only system variable is enabled, ALTER USER additionally requires the
CONNECTION_ADMIN or SUPER privilege.Account Management Statements
2231
By default, an error occurs if you try to modify a user that does not exist. If the IF EXISTS clause is
given, the statement produces a warning for each named user that does not exist, rather than an error.
Important
Under some circumstances, ALTER USER may be recorded in server logs or
on the client side in a history file such as ~/.mysql_history, which means
that cleartext passwords may be read by anyone having read access to that
information. For information about the conditions under which this occurs for the
server logs and how to control it, see Section 6.1.2.3, “Passwords and Logging”.
For similar information about client-side logging, see Section 4.5.1.3, “mysql
Logging”.

</code></pre>

<h3 id="21"><strong>2.1 例子</strong></h3>
<blockquote>
<p>Example: Modify an account to use the sha256_password authentication plugin and the given password. Require that a new password be chosen every 180 days:</p>
</blockquote>
<pre><code class="mysql">ALTER USER 'jeffrey'@'localhost'  IDENTIFIED WITH sha256_password BY 'new_password'  PASSWORD EXPIRE INTERVAL 180 DAY;
</code></pre>

<p>[toc]</p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '../../../../..';</script>
    <script src="../../../../../js/theme.js" defer></script>
      <script src="../../../../../search/main.js" defer></script>

</body>
</html>
